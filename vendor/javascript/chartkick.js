// chartkick@5.0.1 downloaded from https://ga.jspm.io/npm:chartkick@5.0.1/dist/chartkick.esm.js

function isArray(t){return"[object Array]"===Object.prototype.toString.call(t)}function isFunction(t){return t instanceof Function}function isPlainObject(t){return"[object Object]"===Object.prototype.toString.call(t)&&!isFunction(t)&&t instanceof Object}function extend(t,e){for(var r in e)if("__proto__"!==r)if(isPlainObject(e[r])||isArray(e[r])){isPlainObject(e[r])&&!isPlainObject(t[r])&&(t[r]={});isArray(e[r])&&!isArray(t[r])&&(t[r]=[]);extend(t[r],e[r])}else void 0!==e[r]&&(t[r]=e[r])}function merge(t,e){var r={};extend(r,t);extend(r,e);return r}var t=/^(\d\d\d\d)(?:-)?(\d\d)(?:-)?(\d\d)$/i;function negativeValues(t){for(var e=0;e<t.length;e++){var r=t[e].data;for(var a=0;a<r.length;a++)if(r[a][1]<0)return true}return false}function toStr(t){return""+t}function toFloat(t){return parseFloat(t)}function toDate(e){if(e instanceof Date)return e;if("number"===typeof e)return new Date(1e3*e);var r=toStr(e);var a=r.match(t);if(a){var o=parseInt(a[1],10);var n=parseInt(a[2],10)-1;var i=parseInt(a[3],10);return new Date(o,n,i)}var s=r.replace(/ /,"T").replace(" ","").replace("UTC","Z");return new Date(Date.parse(s)||r)}function toArr(t){if(isArray(t))return t;var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push([r,t[r]]);return e}function jsOptionsFunc(t,e,r,a,o,n,i,s){return function(l,c,u){var p=l.data;var h=merge({},t);h=merge(h,u||{});(l.singleSeriesFormat||"legend"in c)&&e(h,c.legend,l.singleSeriesFormat);c.title&&r(h,c.title);"min"in c?a(h,c.min):negativeValues(p)||a(h,0);c.max&&o(h,c.max);"stacked"in c&&n(h,c.stacked);c.colors&&(h.colors=c.colors);c.xtitle&&i(h,c.xtitle);c.ytitle&&s(h,c.ytitle);h=merge(h,c.library||{});return h}}function sortByTime(t,e){return t[0].getTime()-e[0].getTime()}function sortByNumberSeries(t,e){return t[0]-e[0]}function sortByNumber(t,e){return t-e}function every(t,e){for(var r=0;r<t.length;r++)if(!e(t[r]))return false;return true}function isDay(t){return"day"===t||"week"===t||"month"===t||"year"===t}function calculateTimeUnit(t,e){void 0===e&&(e=false);if(0===t.length)return null;var r=every(t,(function(t){return 0===t.getMilliseconds()&&0===t.getSeconds()}));if(!r)return null;var a=every(t,(function(t){return 0===t.getMinutes()}));if(!a)return"minute";var o=every(t,(function(t){return 0===t.getHours()}));if(!o)return"hour";if(e)return"day";var n=every(t,(function(t){return 1===t.getDate()}));if(!n){var i=t[0].getDay();var s=every(t,(function(t){return t.getDay()===i}));return s?"week":"day"}var l=every(t,(function(t){return 0===t.getMonth()}));return l?"year":"month"}function isDate(t){return!isNaN(toDate(t))&&toStr(t).length>=6}function isNumber(t){return"number"===typeof t}var e=["bytes","KB","MB","GB","TB","PB","EB"];function formatValue(t,r,a,o){t=t||"";if(a.prefix){if(r<0){r*=-1;t+="-"}t+=a.prefix}var n=a.suffix||"";var i=a.precision;var s=a.round;if(a.byteScale){var l=r>=0;l||(r*=-1);var c=o?a.byteScale:r;var u;if(c>=0x1000000000000000){r/=0x1000000000000000;u=6}else if(c>=0x4000000000000){r/=0x4000000000000;u=5}else if(c>=1099511627776){r/=1099511627776;u=4}else if(c>=1073741824){r/=1073741824;u=3}else if(c>=1048576){r/=1048576;u=2}else if(c>=1024){r/=1024;u=1}else u=0;if(void 0===i&&void 0===s){if(r>=1023.5&&u<e.length-1){r=1;u+=1}i=r>=1e3?4:3}n=" "+e[u];l||(r*=-1)}if(void 0!==i&&void 0!==s)throw Error("Use either round or precision, not both");if(!o){if(void 0!==i){r=r.toPrecision(i);a.zeros||(r=parseFloat(r))}if(void 0!==s)if(s<0){var p=Math.pow(10,-1*s);r=parseInt((1*r/p).toFixed(0))*p}else{r=r.toFixed(s);a.zeros||(r=parseFloat(r))}}if(a.thousands||a.decimal){r=toStr(r);var h=r.split(".");r=h[0];a.thousands&&(r=r.replace(/\B(?=(\d{3})+(?!\d))/g,a.thousands));h.length>1&&(r+=(a.decimal||".")+h[1])}return t+r+n}function seriesOption(t,e,r){return r in e?e[r]:r in t.options?t.options[r]:null}var r={maintainAspectRatio:false,animation:false,plugins:{legend:{},tooltip:{displayColors:false,callbacks:{}},title:{font:{size:20},color:"#333"}},interaction:{}};var a={scales:{y:{ticks:{maxTicksLimit:4},title:{font:{size:16},color:"#333"},grid:{}},x:{grid:{drawOnChartArea:false},title:{font:{size:16},color:"#333"},time:{},ticks:{}}}};var o=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#651067"];function hideLegend$2(t,e,r){if(void 0!==e){t.plugins.legend.display=!!e;e&&true!==e&&(t.plugins.legend.position=e)}else r&&(t.plugins.legend.display=false)}function setTitle$2(t,e){t.plugins.title.display=true;t.plugins.title.text=e}function setMin$2(t,e){null!==e&&(t.scales.y.min=toFloat(e))}function setMax$2(t,e){t.scales.y.max=toFloat(e)}function setBarMin$1(t,e){null!==e&&(t.scales.x.min=toFloat(e))}function setBarMax$1(t,e){t.scales.x.max=toFloat(e)}function setStacked$2(t,e){t.scales.x.stacked=!!e;t.scales.y.stacked=!!e}function setXtitle$2(t,e){t.scales.x.title.display=true;t.scales.x.title.text=e}function setYtitle$2(t,e){t.scales.y.title.display=true;t.scales.y.title.text=e}function addOpacity(t,e){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?"rgba("+parseInt(r[1],16)+", "+parseInt(r[2],16)+", "+parseInt(r[3],16)+", "+e+")":t}function notnull(t){return null!==t&&void 0!==t}function setLabelSize(t,e,r){var a=Math.ceil(t.element.offsetWidth/4/e.labels.length);a>25?a=25:a<10&&(a=10);r.scales.x.ticks.callback||(r.scales.x.ticks.callback=function(t){t=toStr(this.getLabelForValue(t));return t.length>a?t.substring(0,a-2)+"...":t})}function calculateScale(t){var e=1;var r=maxAbsY(t);while(r>=1024){e*=1024;r/=1024}return e}function setFormatOptions$1(t,e,r){var a={thousands:t.options.thousands,decimal:t.options.decimal};var o=merge({prefix:t.options.prefix,suffix:t.options.suffix,precision:t.options.precision,round:t.options.round,zeros:t.options.zeros},a);if(t.options.bytes){var n=t.data;"pie"===r&&(n=[{data:n}]);o.byteScale=calculateScale(n)}if("pie"!==r){var i=e.scales.y;"bar"===r&&(i=e.scales.x);if(o.byteScale){i.ticks.stepSize||(i.ticks.stepSize=o.byteScale/2);i.ticks.maxTicksLimit||(i.ticks.maxTicksLimit=4)}i.ticks.callback||(i.ticks.callback=function(t){return formatValue("",t,o,true)});"scatter"!==r&&"bubble"!==r||e.scales.x.ticks.callback||(e.scales.x.ticks.callback=function(t){return formatValue("",t,a,true)})}if(!e.plugins.tooltip.callbacks.label)if("scatter"===r)e.plugins.tooltip.callbacks.label=function(t){var e=t.dataset.label||"";e&&(e+=": ");var r=t.parsed;return e+"("+formatValue("",r.x,a)+", "+formatValue("",r.y,o)+")"};else if("bubble"===r)e.plugins.tooltip.callbacks.label=function(t){var e=t.dataset.label||"";e&&(e+=": ");var r=t.raw;return e+"("+formatValue("",r.x,a)+", "+formatValue("",r.y,o)+", "+formatValue("",r.v,a)+")"};else if("pie"===r)e.plugins.tooltip.callbacks.label=function(t){return formatValue("",t.parsed,o)};else{var s="bar"===r?"x":"y";e.plugins.tooltip.callbacks.label=function(t){if(null!==t.parsed[s]){var e=t.dataset.label||"";e&&(e+=": ");return formatValue(e,t.parsed[s],o)}}}if(("line"===r||"area"===r)&&"number"===t.xtype){e.scales.x.ticks.callback||(e.scales.x.ticks.callback=function(t){return toStr(t)});e.plugins.tooltip.callbacks.title||(e.plugins.tooltip.callbacks.title=function(t){return toStr(t[0].parsed.x)})}}function maxAbsY(t){var e=0;for(var r=0;r<t.length;r++){var a=t[r].data;for(var o=0;o<a.length;o++){var n=Math.abs(a[o][1]);n>e&&(e=n)}}return e}function maxR(t){var e=0;for(var r=0;r<t.length;r++){var a=t[r].data;for(var o=0;o<a.length;o++){var n=a[o][2];n>e&&(e=n)}}return e}var n=jsOptionsFunc(merge(r,a),hideLegend$2,setTitle$2,setMin$2,setMax$2,setStacked$2,setXtitle$2,setYtitle$2);function prepareDefaultData(t){var e=t.data;var r={};var a=[];var o=[];var n=[];for(var i=0;i<e.length;i++){var s=e[i].data;for(var l=0;l<s.length;l++){var c=s[l];var u="datetime"===t.xtype?c[0].getTime():c[0];if(!r[u]){r[u]=new Array(e.length);a.push(u)}r[u][i]=c[1]}}"datetime"!==t.xtype&&"number"!==t.xtype||a.sort(sortByNumber);for(var p=0;p<e.length;p++)n.push([]);for(var h=0;h<a.length;h++){var d=a[h];var f="datetime"===t.xtype?new Date(d):d;o.push(f);var v=r[d];for(var m=0;m<e.length;m++){var y=v[m];n[m].push(void 0===y?null:y)}}return{labels:o,values:n}}function prepareBubbleData(t){var e=t.data;var r=[];var a=maxR(e);for(var o=0;o<e.length;o++){var n=e[o].data;var i=[];for(var s=0;s<n.length;s++){var l=n[s];i.push({x:l[0],y:l[1],r:20*l[2]/a,v:l[2]})}r.push(i)}return{labels:[],values:r}}function prepareNumberData(t){var e=t.data;var r=[];for(var a=0;a<e.length;a++){var o=e[a].data;o.sort(sortByNumberSeries);var n=[];for(var i=0;i<o.length;i++){var s=o[i];n.push({x:s[0],y:s[1]})}r.push(n)}return{labels:[],values:r}}function prepareData(t,e){return"bubble"===e?prepareBubbleData(t):"number"===t.xtype&&"bar"!==e&&"column"!==e?prepareNumberData(t):prepareDefaultData(t)}function createDataTable(t,e,r){var a=prepareData(t,r);var n=a.labels;var i=a.values;var s=t.data;var l=[];var c=t.options.colors||o;for(var u=0;u<s.length;u++){var p=s[u];var h=void 0;var d=void 0;if(!t.options.colors||!t.singleSeriesFormat||"bar"!==r&&"column"!==r||p.color||!isArray(t.options.colors)||isArray(t.options.colors[0])){h=p.color||c[u];d="line"!==r?addOpacity(h,.5):h}else{h=c;d=[];for(var f=0;f<c.length;f++)d[f]=addOpacity(h[f],.5)}var v={label:p.name||"",data:i[u],fill:"area"===r,borderColor:h,backgroundColor:d,borderWidth:2};var m="line"===r||"area"===r||"scatter"===r||"bubble"===r;if(m){v.pointBackgroundColor=h;v.pointHoverBackgroundColor=h;v.pointHitRadius=50}if("bubble"===r){v.pointBackgroundColor=d;v.pointHoverBackgroundColor=d;v.pointHoverBorderWidth=2}p.stack&&(v.stack=p.stack);var y=seriesOption(t,p,"curve");false===y?v.tension=0:m&&(v.tension=.4);var g=seriesOption(t,p,"points");if(false===g){v.pointRadius=0;v.pointHoverRadius=0}v=merge(v,t.options.dataset||{});v=merge(v,p.library||{});v=merge(v,p.dataset||{});l.push(v)}var b=t.options.xmin;var C=t.options.xmax;if("datetime"===t.xtype){notnull(b)&&(e.scales.x.min=toDate(b).getTime());notnull(C)&&(e.scales.x.max=toDate(C).getTime())}else if("number"===t.xtype){notnull(b)&&(e.scales.x.min=b);notnull(C)&&(e.scales.x.max=C)}if("datetime"===t.xtype){var x=calculateTimeUnit(n);if(0===n.length){notnull(b)&&n.push(toDate(b));notnull(C)&&n.push(toDate(C))}if(n.length>0){var w=(notnull(b)?toDate(b):n[0]).getTime();var _=(notnull(C)?toDate(C):n[0]).getTime();for(var S=1;S<n.length;S++){var A=n[S].getTime();A<w&&(w=A);A>_&&(_=A)}var D=(_-w)/864e5;if(!e.scales.x.time.unit){var k;if("year"===x||D>3650){e.scales.x.time.unit="year";k=365}else if("month"===x||D>300){e.scales.x.time.unit="month";k=30}else if("week"===x||"day"===x||D>10){e.scales.x.time.unit="day";k=1}else if("hour"===x||D>.5){e.scales.x.time.displayFormats={hour:"MMM d, h a"};e.scales.x.time.unit="hour";k=1/24}else if("minute"===x){e.scales.x.time.displayFormats={minute:"h:mm a"};e.scales.x.time.unit="minute";k=1/24/60}if(k&&D>0){var T=t.element.offsetWidth;if(T>0){var O=Math.ceil(D/k/(T/100));"week"===x&&1===k&&(O=7*Math.ceil(O/7));e.scales.x.ticks.stepSize=O}}}e.scales.x.time.tooltipFormat||("year"===x?e.scales.x.time.tooltipFormat="yyyy":"month"===x?e.scales.x.time.tooltipFormat="MMM yyyy":"week"===x||"day"===x?e.scales.x.time.tooltipFormat="PP":"hour"===x?e.scales.x.time.tooltipFormat="MMM d, h a":"minute"===x&&(e.scales.x.time.tooltipFormat="h:mm a"))}}return{labels:n,datasets:l}}var i=function defaultExport(t){this.name="chartjs";this.library=t};i.prototype.renderLineChart=function renderLineChart(t,e){e||(e="line");var r={};var a=n(t,merge(r,t.options));setFormatOptions$1(t,a,e);var o=createDataTable(t,a,e);if("number"===t.xtype){a.scales.x.type=a.scales.x.type||"linear";a.scales.x.position=a.scales.x.position||"bottom"}else a.scales.x.type="string"===t.xtype?"category":"time";this.drawChart(t,"line",o,a)};i.prototype.renderPieChart=function renderPieChart(t){var e=merge({},r);t.options.donut&&(e.cutout="50%");"legend"in t.options&&hideLegend$2(e,t.options.legend);t.options.title&&setTitle$2(e,t.options.title);e=merge(e,t.options.library||{});setFormatOptions$1(t,e,"pie");var a=[];var n=[];for(var i=0;i<t.data.length;i++){var s=t.data[i];a.push(s[0]);n.push(s[1])}var l={data:n,backgroundColor:t.options.colors||o};l=merge(l,t.options.dataset||{});var c={labels:a,datasets:[l]};this.drawChart(t,"pie",c,e)};i.prototype.renderColumnChart=function renderColumnChart(t,e){var o;if("bar"===e){var i=merge(r,a);i.indexAxis="y";i.scales.x.grid.drawOnChartArea=true;i.scales.y.grid.drawOnChartArea=false;delete i.scales.y.ticks.maxTicksLimit;o=jsOptionsFunc(i,hideLegend$2,setTitle$2,setBarMin$1,setBarMax$1,setStacked$2,setXtitle$2,setYtitle$2)(t,t.options)}else o=n(t,t.options);setFormatOptions$1(t,o,e);var s=createDataTable(t,o,"column");"bar"!==e&&setLabelSize(t,s,o);"mode"in o.interaction||(o.interaction.mode="index");this.drawChart(t,"bar",s,o)};i.prototype.renderAreaChart=function renderAreaChart(t){this.renderLineChart(t,"area")};i.prototype.renderBarChart=function renderBarChart(t){this.renderColumnChart(t,"bar")};i.prototype.renderScatterChart=function renderScatterChart(t,e){e=e||"scatter";var r=n(t,t.options);setFormatOptions$1(t,r,e);"showLine"in r||(r.showLine=false);var a=createDataTable(t,r,e);r.scales.x.type=r.scales.x.type||"linear";r.scales.x.position=r.scales.x.position||"bottom";"mode"in r.interaction||(r.interaction.mode="nearest");this.drawChart(t,e,a,r)};i.prototype.renderBubbleChart=function renderBubbleChart(t){this.renderScatterChart(t,"bubble")};i.prototype.destroy=function destroy(t){t.chart&&t.chart.destroy()};i.prototype.drawChart=function drawChart(t,e,r,a){this.destroy(t);if(!t.destroyed){var o={type:e,data:r,options:a};t.options.code&&window.console.log("new Chart(ctx, "+JSON.stringify(o)+");");t.element.innerHTML="<canvas></canvas>";var n=t.element.getElementsByTagName("CANVAS")[0];t.chart=new this.library(n,o)}};var s={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:false},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},area:{},series:{marker:{}}},time:{useUTC:false}};function hideLegend$1(t,e,r){if(void 0!==e){t.legend.enabled=!!e;if(e&&true!==e)if("top"===e||"bottom"===e)t.legend.verticalAlign=e;else{t.legend.layout="vertical";t.legend.verticalAlign="middle";t.legend.align=e}}else r&&(t.legend.enabled=false)}function setTitle$1(t,e){t.title.text=e}function setMin$1(t,e){t.yAxis.min=e}function setMax$1(t,e){t.yAxis.max=e}function setStacked$1(t,e){var r=e?true===e?"normal":e:null;t.plotOptions.series.stacking=r;t.plotOptions.area.stacking=r;t.plotOptions.areaspline.stacking=r}function setXtitle$1(t,e){t.xAxis.title.text=e}function setYtitle$1(t,e){t.yAxis.title.text=e}var l=jsOptionsFunc(s,hideLegend$1,setTitle$1,setMin$1,setMax$1,setStacked$1,setXtitle$1,setYtitle$1);function setFormatOptions(t,e,r){var a={prefix:t.options.prefix,suffix:t.options.suffix,thousands:t.options.thousands,decimal:t.options.decimal,precision:t.options.precision,round:t.options.round,zeros:t.options.zeros};"pie"===r||isArray(e.yAxis)||e.yAxis.labels.formatter||(e.yAxis.labels.formatter=function(){return formatValue("",this.value,a)});e.tooltip.pointFormatter||e.tooltip.pointFormat||(e.tooltip.pointFormatter=function(){return'<span style="color:'+this.color+'">●</span> '+formatValue(this.series.name+": <b>",this.y,a)+"</b><br/>"})}var c=function defaultExport(t){this.name="highcharts";this.library=t};c.prototype.renderLineChart=function renderLineChart(t,e){e=e||"spline";var r={};"areaspline"===e&&(r={plotOptions:{areaspline:{stacking:"normal"},area:{stacking:"normal"},series:{marker:{enabled:false}}}});false===t.options.curve&&("areaspline"===e?e="area":"spline"===e&&(e="line"));var a=l(t,t.options,r);"number"===t.xtype?a.xAxis.type=a.xAxis.type||"linear":a.xAxis.type="string"===t.xtype?"category":"datetime";a.chart.type||(a.chart.type=e);setFormatOptions(t,a,e);var o=t.data;for(var n=0;n<o.length;n++){o[n].name=o[n].name||"Value";var i=o[n].data;if("datetime"===t.xtype)for(var s=0;s<i.length;s++)i[s][0]=i[s][0].getTime();else"number"===t.xtype&&i.sort(sortByNumberSeries);o[n].marker={symbol:"circle"};false===t.options.points&&(o[n].marker.enabled=false)}this.drawChart(t,o,a)};c.prototype.renderScatterChart=function renderScatterChart(t){var e=l(t,t.options,{});e.chart.type="scatter";this.drawChart(t,t.data,e)};c.prototype.renderPieChart=function renderPieChart(t){var e=merge(s,{});t.options.colors&&(e.colors=t.options.colors);t.options.donut&&(e.plotOptions={pie:{innerSize:"50%"}});"legend"in t.options&&hideLegend$1(e,t.options.legend);t.options.title&&setTitle$1(e,t.options.title);var r=merge(e,t.options.library||{});setFormatOptions(t,r,"pie");var a=[{type:"pie",name:t.options.label||"Value",data:t.data}];this.drawChart(t,a,r)};c.prototype.renderColumnChart=function renderColumnChart(t,e){e=e||"column";var r=t.data;var a=l(t,t.options);var o=[];var n=[];a.chart.type=e;setFormatOptions(t,a,e);for(var i=0;i<r.length;i++){var s=r[i];for(var c=0;c<s.data.length;c++){var u=s.data[c];if(!o[u[0]]){o[u[0]]=new Array(r.length);n.push(u[0])}o[u[0]][i]=u[1]}}"number"===t.xtype&&n.sort(sortByNumber);a.xAxis.categories=n;var p=[];for(var h=0;h<r.length;h++){var d=[];for(var f=0;f<n.length;f++)d.push(o[n[f]][h]||0);var v={name:r[h].name||"Value",data:d};r[h].stack&&(v.stack=r[h].stack);p.push(v)}this.drawChart(t,p,a)};c.prototype.renderBarChart=function renderBarChart(t){this.renderColumnChart(t,"bar")};c.prototype.renderAreaChart=function renderAreaChart(t){this.renderLineChart(t,"areaspline")};c.prototype.destroy=function destroy(t){t.chart&&t.chart.destroy()};c.prototype.drawChart=function drawChart(t,e,r){this.destroy(t);if(!t.destroyed){r.chart.renderTo=t.element.id;r.series=e;t.options.code&&window.console.log("new Highcharts.Chart("+JSON.stringify(r)+");");t.chart=new this.library.Chart(r)}};var u={};var p=[];var h={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}};function hideLegend(t,e,r){if(void 0!==e){var a;a=e?true===e?"right":e:"none";t.legend.position=a}else r&&(t.legend.position="none")}function setTitle(t,e){t.title=e;t.titleTextStyle={color:"#333",fontSize:"20px"}}function setMin(t,e){t.vAxis.viewWindow.min=e}function setMax(t,e){t.vAxis.viewWindow.max=e}function setBarMin(t,e){t.hAxis.viewWindow.min=e}function setBarMax(t,e){t.hAxis.viewWindow.max=e}function setStacked(t,e){t.isStacked=e||false}function setXtitle(t,e){t.hAxis.title=e;t.hAxis.titleTextStyle.italic=false}function setYtitle(t,e){t.vAxis.title=e;t.vAxis.titleTextStyle.italic=false}var d=jsOptionsFunc(h,hideLegend,setTitle,setMin,setMax,setStacked,setXtitle,setYtitle);function resize(t){window.attachEvent?window.attachEvent("onresize",t):window.addEventListener&&window.addEventListener("resize",t,true);t()}var f=function defaultExport(t){this.name="google";this.library=t};f.prototype.renderLineChart=function renderLineChart(t){var e=this;this.waitForLoaded(t,(function(){var r={};false===t.options.curve&&(r.curveType="none");false===t.options.points&&(r.pointSize=0);var a=d(t,t.options,r);var o=e.createDataTable(t.data,t.xtype);e.drawChart(t,"LineChart",o,a)}))};f.prototype.renderPieChart=function renderPieChart(t){var e=this;this.waitForLoaded(t,(function(){var r={chartArea:{top:"10%",height:"80%"},legend:{}};t.options.colors&&(r.colors=t.options.colors);t.options.donut&&(r.pieHole=.5);"legend"in t.options&&hideLegend(r,t.options.legend);t.options.title&&setTitle(r,t.options.title);var a=merge(merge(h,r),t.options.library||{});var o=new e.library.visualization.DataTable;o.addColumn("string","");o.addColumn("number","Value");o.addRows(t.data);e.drawChart(t,"PieChart",o,a)}))};f.prototype.renderColumnChart=function renderColumnChart(t){var e=this;this.waitForLoaded(t,(function(){var r=d(t,t.options);var a=e.createDataTable(t.data,t.xtype);e.drawChart(t,"ColumnChart",a,r)}))};f.prototype.renderBarChart=function renderBarChart(t){var e=this;this.waitForLoaded(t,(function(){var r={hAxis:{gridlines:{color:"#ccc"}}};var a=jsOptionsFunc(h,hideLegend,setTitle,setBarMin,setBarMax,setStacked,setXtitle,setYtitle)(t,t.options,r);var o=e.createDataTable(t.data,t.xtype);e.drawChart(t,"BarChart",o,a)}))};f.prototype.renderAreaChart=function renderAreaChart(t){var e=this;this.waitForLoaded(t,(function(){var r={isStacked:true,pointSize:0,areaOpacity:.5};var a=d(t,t.options,r);var o=e.createDataTable(t.data,t.xtype);e.drawChart(t,"AreaChart",o,a)}))};f.prototype.renderGeoChart=function renderGeoChart(t){var e=this;this.waitForLoaded(t,"geochart",(function(){var r={legend:"none",colorAxis:{colors:t.options.colors||["#f6c7b6","#ce502d"]}};var a=merge(merge(h,r),t.options.library||{});var o=new e.library.visualization.DataTable;o.addColumn("string","");o.addColumn("number",t.options.label||"Value");o.addRows(t.data);e.drawChart(t,"GeoChart",o,a)}))};f.prototype.renderScatterChart=function renderScatterChart(t){var e=this;this.waitForLoaded(t,(function(){var r={};var a=d(t,t.options,r);var o=t.data;var n=[];for(var i=0;i<o.length;i++){o[i].name=o[i].name||"Value";var s=o[i].data;for(var l=0;l<s.length;l++){var c=new Array(o.length+1);c[0]=s[l][0];c[i+1]=s[l][1];n.push(c)}}var u=new e.library.visualization.DataTable;u.addColumn("number","");for(var p=0;p<o.length;p++)u.addColumn("number",o[p].name);u.addRows(n);e.drawChart(t,"ScatterChart",u,a)}))};f.prototype.renderTimeline=function renderTimeline(t){var e=this;this.waitForLoaded(t,"timeline",(function(){var r={legend:"none"};t.options.colors&&(r.colors=t.options.colors);var a=merge(merge(h,r),t.options.library||{});var o=new e.library.visualization.DataTable;o.addColumn({type:"string",id:"Name"});o.addColumn({type:"date",id:"Start"});o.addColumn({type:"date",id:"End"});o.addRows(t.data);t.element.style.lineHeight="normal";e.drawChart(t,"Timeline",o,a)}))};f.prototype.destroy=function destroy(t){t.chart&&t.chart.clearChart()};f.prototype.drawChart=function drawChart(t,e,r,a){this.destroy(t);if(!t.destroyed){t.options.code&&window.console.log("var data = new google.visualization.DataTable("+r.toJSON()+");\nvar chart = new google.visualization."+e+"(element);\nchart.draw(data, "+JSON.stringify(a)+");");t.chart=new this.library.visualization[e](t.element);resize((function(){t.chart.draw(r,a)}))}};f.prototype.waitForLoaded=function waitForLoaded(t,e,r){var a=this;if(!r){r=e;e="corechart"}p.push({pack:e,callback:r});if(u[e])this.runCallbacks();else{u[e]=true;var o={packages:[e],callback:function(){a.runCallbacks()}};var n=t.__config();n.language&&(o.language=n.language);"geochart"===e&&n.mapsApiKey&&(o.mapsApiKey=n.mapsApiKey);this.library.charts.load("current",o)}};f.prototype.runCallbacks=function runCallbacks(){for(var t=0;t<p.length;t++){var e=p[t];var r=this.library.visualization&&("corechart"===e.pack&&this.library.visualization.LineChart||"timeline"===e.pack&&this.library.visualization.Timeline||"geochart"===e.pack&&this.library.visualization.GeoChart);if(r){e.callback();p.splice(t,1);t--}}};f.prototype.createDataTable=function createDataTable(t,e){var r=[];var a=[];for(var o=0;o<t.length;o++){var n=t[o];t[o].name=t[o].name||"Value";for(var i=0;i<n.data.length;i++){var s=n.data[i];var l="datetime"===e?s[0].getTime():s[0];if(!r[l]){r[l]=new Array(t.length);a.push(l)}r[l][o]=s[1]}}var c=[];var u=[];for(var p=0;p<a.length;p++){var h=a[p];var d=void 0;if("datetime"===e){d=new Date(h);u.push(d)}else d=h;c.push([d].concat(r[h]))}var f=true;if("datetime"===e){c.sort(sortByTime);var v=calculateTimeUnit(u,true);f=isDay(v)}else if("number"===e){c.sort(sortByNumberSeries);for(var m=0;m<c.length;m++)c[m][0]=toStr(c[m][0]);e="string"}var y=new this.library.visualization.DataTable;e="datetime"===e&&f?"date":e;y.addColumn(e,"");for(var g=0;g<t.length;g++)y.addColumn("number",t[g].name);y.addRows(c);return y};var v=[];function getAdapterType(t){if(t){if("Highcharts"===t.product)return c;if(t.charts)return f;if(isFunction(t))return i}throw new Error("Unknown adapter")}function addAdapter(t){var e=getAdapterType(t);for(var r=0;r<v.length;r++)if(v[r].library===t)return;v.push(new e(t))}function loadAdapters(){"Chart"in window&&addAdapter(window.Chart);"Highcharts"in window&&addAdapter(window.Highcharts);window.google&&window.google.charts&&addAdapter(window.google)}function callAdapter(t,e){var r="render"+t;var a=e.options.adapter;loadAdapters();for(var o=0;o<v.length;o++){var n=v[o];if((!a||a===n.name)&&isFunction(n[r])){e.adapter=n.name;e.__adapterObject=n;return n[r](e)}}throw v.length>0?new Error("No charting library found for "+t):new Error("No charting libraries found - be sure to include one before your charts")}var m={charts:{},configure:function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(m.config[e]=t[e])},setDefaultOptions:function(t){m.options=t},eachChart:function(t){for(var e in m.charts)Object.prototype.hasOwnProperty.call(m.charts,e)&&t(m.charts[e])},destroyAll:function(){for(var t in m.charts)if(Object.prototype.hasOwnProperty.call(m.charts,t)){m.charts[t].destroy();delete m.charts[t]}},config:{},options:{},adapters:v,addAdapter:addAdapter,use:function(t){addAdapter(t);return m}};function formatSeriesBubble(t){var e=[];for(var r=0;r<t.length;r++)e.push([toFloat(t[r][0]),toFloat(t[r][1]),toFloat(t[r][2])]);return e}function formatSeriesData(t,e){if("bubble"===e)return formatSeriesBubble(t);var r;r="number"===e?toFloat:"datetime"===e?toDate:toStr;var a=[];for(var o=0;o<t.length;o++)a.push([r(t[o][0]),toFloat(t[o][1])]);return a}function detectXType(t,e,r){return dataEmpty(t)?!r.xmin&&!r.xmax||r.xmin&&!isDate(r.xmin)||r.xmax&&!isDate(r.xmax)?"number":"datetime":detectXTypeWithFunction(t,isNumber)?"number":!e&&detectXTypeWithFunction(t,isDate)?"datetime":"string"}function detectXTypeWithFunction(t,e){for(var r=0;r<t.length;r++){var a=toArr(t[r].data);for(var o=0;o<a.length;o++)if(!e(a[o][0]))return false}return true}function copySeries(t){var e=[];for(var r=0;r<t.length;r++){var a={};for(var o in t[r])Object.prototype.hasOwnProperty.call(t[r],o)&&(a[o]=t[r][o]);e.push(a)}return e}function processSeries(t,e,r){var a=t.options;var o=t.rawData;t.singleSeriesFormat=!isArray(o)||!isPlainObject(o[0]);t.singleSeriesFormat&&(o=[{name:a.label,data:o}]);o=copySeries(o);for(var n=0;n<o.length;n++)o[n].data=toArr(o[n].data);t.xtype=e||(a.discrete?"string":detectXType(o,r,a));for(var i=0;i<o.length;i++)o[i].data=formatSeriesData(o[i].data,t.xtype);return o}function processSimple(t){var e=toArr(t.rawData);for(var r=0;r<e.length;r++)e[r]=[toStr(e[r][0]),toFloat(e[r][1])];return e}function dataEmpty(t,e){if("PieChart"===e||"GeoChart"===e||"Timeline"===e)return 0===t.length;for(var r=0;r<t.length;r++)if(t[r].data.length>0)return false;return true}function addDownloadButton(t){var e=t.options.download;true===e?e={}:"string"===typeof e&&(e={filename:e});var r=document.createElement("a");r.download=e.filename||"chart.png";r.style.position="absolute";r.style.top="20px";r.style.right="20px";r.style.zIndex=1e3;r.style.lineHeight="20px";r.target="_blank";var a=document.createElement("img");var o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --\x3e<path fill="#CCCCCC" d="M344 240h-56L287.1 152c0-13.25-10.75-24-24-24h-16C234.7 128 223.1 138.8 223.1 152L224 240h-56c-9.531 0-18.16 5.656-22 14.38C142.2 263.1 143.9 273.3 150.4 280.3l88.75 96C243.7 381.2 250.1 384 256.8 384c7.781-.3125 13.25-2.875 17.75-7.844l87.25-96c6.406-7.031 8.031-17.19 4.188-25.88S353.5 240 344 240zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208S370.7 464 256 464z"/></svg>';a.src="data:image/svg+xml;utf8,"+encodeURIComponent(o);a.alt="Download";a.style.width="20px";a.style.height="20px";a.style.border="none";r.appendChild(a);var n=t.element;n.style.position="relative";t.__downloadAttached=true;t.__enterEvent=n.addEventListener("mouseover",(function(a){var o=a.relatedTarget;if((!o||o!==this&&!this.contains(o))&&t.options.download){r.href=t.toImage(e);n.appendChild(r)}}));t.__leaveEvent=n.addEventListener("mouseout",(function(t){var e=t.relatedTarget;e&&(e===this||this.contains(e))||r.parentNode&&r.parentNode.removeChild(r)}))}var y=[];var g=0;var b=4;function pushRequest(t,e,r){y.push([t,e,r]);runNext()}function runNext(){if(g<b){var t=y.shift();if(t){g++;getJSON(t[0],t[1],t[2]);runNext()}}}function requestComplete(){g--;runNext()}function getJSON(t,e,r){var a=new XMLHttpRequest;a.open("GET",t,true);a.setRequestHeader("Content-Type","application/json");a.onload=function(){requestComplete();200===a.status?e(JSON.parse(a.responseText)):r(a.statusText)};a.send()}function setText(t,e){t.textContent=e}function chartError(t,e,r){r||(e="Error Loading Chart: "+e);setText(t,e);t.style.color="#ff0000"}function errorCatcher(t){try{t.__render()}catch(e){chartError(t.element,e.message);throw e}}function fetchDataSource(t,e,r){r&&t.options.loading&&("string"===typeof e||"function"===typeof e)&&setText(t.element,t.options.loading);if("string"===typeof e)pushRequest(e,(function(e){t.rawData=e;errorCatcher(t)}),(function(e){chartError(t.element,e)}));else if("function"===typeof e)try{e((function(e){t.rawData=e;errorCatcher(t)}),(function(e){chartError(t.element,e,true)}))}catch(e){chartError(t.element,e,true)}else{t.rawData=e;errorCatcher(t)}}function renderChart(t,e){if(dataEmpty(e.data,t)){var r=e.options.empty||e.options.messages&&e.options.messages.empty||"No data";setText(e.element,r)}else{callAdapter(t,e);e.options.download&&!e.__downloadAttached&&"chartjs"===e.adapter&&addDownloadButton(e)}}function getElement(t){if("string"===typeof t){var e=t;t=document.getElementById(t);if(!t)throw new Error("No element with id "+e)}return t}var C=function Chart(t,e,r){this.element=getElement(t);this.options=merge(m.options,r||{});this.dataSource=e;this.element.id&&(m.charts[this.element.id]=this);fetchDataSource(this,e,true);this.options.refresh&&this.startRefresh()};C.prototype.getElement=function getElement(){return this.element};C.prototype.getDataSource=function getDataSource(){return this.dataSource};C.prototype.getData=function getData(){return this.data};C.prototype.getOptions=function getOptions(){return this.options};C.prototype.getChartObject=function getChartObject(){return this.chart};C.prototype.getAdapter=function getAdapter(){return this.adapter};C.prototype.updateData=function updateData(t,e){this.dataSource=t;e&&this.__updateOptions(e);fetchDataSource(this,t,true)};C.prototype.setOptions=function setOptions(t){this.__updateOptions(t);this.redraw()};C.prototype.redraw=function redraw(){fetchDataSource(this,this.rawData)};C.prototype.refreshData=function refreshData(){if("string"===typeof this.dataSource){var t=-1===this.dataSource.indexOf("?")?"?":"&";var e=this.dataSource+t+"_="+(new Date).getTime();fetchDataSource(this,e)}else"function"===typeof this.dataSource&&fetchDataSource(this,this.dataSource)};C.prototype.startRefresh=function startRefresh(){var t=this;var e=this.options.refresh;if(e&&"string"!==typeof this.dataSource&&"function"!==typeof this.dataSource)throw new Error("Data source must be a URL or callback for refresh");if(!this.intervalId){if(!e)throw new Error("No refresh interval");this.intervalId=setInterval((function(){t.refreshData()}),1e3*e)}};C.prototype.stopRefresh=function stopRefresh(){if(this.intervalId){clearInterval(this.intervalId);this.intervalId=null}};C.prototype.toImage=function toImage(t){if("chartjs"===this.adapter){if(t&&t.background&&"transparent"!==t.background){var e=this.chart.canvas;var r=this.chart.ctx;var a=document.createElement("canvas");var o=a.getContext("2d");a.width=r.canvas.width;a.height=r.canvas.height;o.fillStyle=t.background;o.fillRect(0,0,a.width,a.height);o.drawImage(e,0,0);return a.toDataURL("image/png")}return this.chart.toBase64Image()}throw new Error("Feature only available for Chart.js")};C.prototype.destroy=function destroy(){this.destroyed=true;this.stopRefresh();this.__adapterObject&&this.__adapterObject.destroy(this);this.__enterEvent&&this.element.removeEventListener("mouseover",this.__enterEvent);this.__leaveEvent&&this.element.removeEventListener("mouseout",this.__leaveEvent)};C.prototype.__updateOptions=function __updateOptions(t){var e=t.refresh&&t.refresh!==this.options.refresh;this.options=merge(m.options,t);if(e){this.stopRefresh();this.startRefresh()}};C.prototype.__render=function __render(){this.data=this.__processData();renderChart(this.__chartName(),this)};C.prototype.__config=function __config(){return m.config};var x=function(t){function LineChart(){t.apply(this,arguments)}t&&(LineChart.__proto__=t);LineChart.prototype=Object.create(t&&t.prototype);LineChart.prototype.constructor=LineChart;LineChart.prototype.__processData=function __processData(){return processSeries(this)};LineChart.prototype.__chartName=function __chartName(){return"LineChart"};return LineChart}(C);var w=function(t){function PieChart(){t.apply(this,arguments)}t&&(PieChart.__proto__=t);PieChart.prototype=Object.create(t&&t.prototype);PieChart.prototype.constructor=PieChart;PieChart.prototype.__processData=function __processData(){return processSimple(this)};PieChart.prototype.__chartName=function __chartName(){return"PieChart"};return PieChart}(C);var _=function(t){function ColumnChart(){t.apply(this,arguments)}t&&(ColumnChart.__proto__=t);ColumnChart.prototype=Object.create(t&&t.prototype);ColumnChart.prototype.constructor=ColumnChart;ColumnChart.prototype.__processData=function __processData(){return processSeries(this,null,true)};ColumnChart.prototype.__chartName=function __chartName(){return"ColumnChart"};return ColumnChart}(C);var S=function(t){function BarChart(){t.apply(this,arguments)}t&&(BarChart.__proto__=t);BarChart.prototype=Object.create(t&&t.prototype);BarChart.prototype.constructor=BarChart;BarChart.prototype.__processData=function __processData(){return processSeries(this,null,true)};BarChart.prototype.__chartName=function __chartName(){return"BarChart"};return BarChart}(C);var A=function(t){function AreaChart(){t.apply(this,arguments)}t&&(AreaChart.__proto__=t);AreaChart.prototype=Object.create(t&&t.prototype);AreaChart.prototype.constructor=AreaChart;AreaChart.prototype.__processData=function __processData(){return processSeries(this)};AreaChart.prototype.__chartName=function __chartName(){return"AreaChart"};return AreaChart}(C);var D=function(t){function GeoChart(){t.apply(this,arguments)}t&&(GeoChart.__proto__=t);GeoChart.prototype=Object.create(t&&t.prototype);GeoChart.prototype.constructor=GeoChart;GeoChart.prototype.__processData=function __processData(){return processSimple(this)};GeoChart.prototype.__chartName=function __chartName(){return"GeoChart"};return GeoChart}(C);var k=function(t){function ScatterChart(){t.apply(this,arguments)}t&&(ScatterChart.__proto__=t);ScatterChart.prototype=Object.create(t&&t.prototype);ScatterChart.prototype.constructor=ScatterChart;ScatterChart.prototype.__processData=function __processData(){return processSeries(this,"number")};ScatterChart.prototype.__chartName=function __chartName(){return"ScatterChart"};return ScatterChart}(C);var T=function(t){function BubbleChart(){t.apply(this,arguments)}t&&(BubbleChart.__proto__=t);BubbleChart.prototype=Object.create(t&&t.prototype);BubbleChart.prototype.constructor=BubbleChart;BubbleChart.prototype.__processData=function __processData(){return processSeries(this,"bubble")};BubbleChart.prototype.__chartName=function __chartName(){return"BubbleChart"};return BubbleChart}(C);var O=function(t){function Timeline(){t.apply(this,arguments)}t&&(Timeline.__proto__=t);Timeline.prototype=Object.create(t&&t.prototype);Timeline.prototype.constructor=Timeline;Timeline.prototype.__processData=function __processData(){var t=this.rawData;for(var e=0;e<t.length;e++){t[e][1]=toDate(t[e][1]);t[e][2]=toDate(t[e][2])}return t};Timeline.prototype.__chartName=function __chartName(){return"Timeline"};return Timeline}(C);m.LineChart=x;m.PieChart=w;m.ColumnChart=_;m.BarChart=S;m.AreaChart=A;m.GeoChart=D;m.ScatterChart=k;m.BubbleChart=T;m.Timeline=O;if("undefined"!==typeof window&&!window.Chartkick){window.Chartkick=m;document.addEventListener("turbolinks:before-render",(function(){false!==m.config.autoDestroy&&m.destroyAll()}));document.addEventListener("turbo:before-render",(function(){false!==m.config.autoDestroy&&m.destroyAll()}));setTimeout((function(){window.dispatchEvent(new Event("chartkick:load"))}),0)}m.default=m;export{m as default};

